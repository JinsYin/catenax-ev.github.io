<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1456" height="800" viewBox="-0.5 -0.5 1456 800"><rect width="405" height="710" y="30" fill="#f5f5f5" stroke="#666" pointer-events="all" rx="60.75" ry="60.75"/><switch transform="translate(-.5 -.5)"><foreignObject width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow:visible;text-align:left"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe flex-start;justify-content:unsafe center;width:399px;height:1px;padding-top:37px;margin-left:5px"><div data-drawio-colors="color: #333333;" style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:14px;font-family:Helvetica;color:#333;line-height:1.2;pointer-events:all;white-space:normal;overflow-wrap:normal"><b><font color="#5912ff">OSim Manager<br/>APP</font></b><br/><br/><div style="text-align:left"><i>Available Information before call :</i></div><div style="text-align:left"><span style="background-color:initial"><b>myBPNS</b>= &quot;A&quot;</span></div><div style="text-align:left"><span style="background-color:initial"><b>BPNS of my partner</b>= &quot;B&quot;</span></div><div style="text-align:left"><span style="background-color:initial"><b>LastReceivedSimResultID from &quot;B&quot;</b>= &quot;123&quot;</span></div><div style="text-align:left"><span style="background-color:initial"><br/></span></div><div style="text-align:left"><span style="background-color:initial"><br/></span></div><div style="text-align:left"><span style="background-color:initial"><u>Steps:</u></span></div><div style="text-align:left">1. Call requestLatestSimulationResult<span style="background-color:initial">(</span></div><div style="text-align:left"><span style="background-color:initial">BPNS of &quot;A&quot;,</span></div><div style="text-align:left"><span style="background-color:initial">ID of the last Simulation Result from &quot;B&quot;,</span></div><div style="text-align:left"><span style="background-color:initial">)</span></div><div style="text-align:left"><br/></div><div style="text-align:left"><br/></div><div style="text-align:left"><br/></div><div style="text-align:left"><br/></div><div style="text-align:left"><br/></div><div style="text-align:left"><br/></div><div style="text-align:left"><br/></div><div style="text-align:left"><br/></div><div style="text-align:left"><br/></div><div style="text-align:left"><br/></div><div style="text-align:left">2. Receive Return Value</div><div style="text-align:left">2.1</div><span><div style="text-align:left"><span style="background-color:initial">IF retval =</span><span style="background-color:initial">NoNewerSimulationAvailable</span><span style="background-color:initial">THEN</span></div><div style="text-align:left"><span style="background-color:initial"><span style="white-space:pre"/>do nothing</span></div></span><div style="text-align:left">ELSEIF retval &lt;&gt; OK</div><div style="text-align:left"><span/><span style="white-space:pre"/>Delete/Archive last received simulation result<span/>from &quot;B&quot;<br/></div><div style="text-align:left">END IF</div><div style="text-align:left"><br/></div><div style="text-align:left"><br/></div><div style="text-align:left">3. Persist the received simulation result</div><span><div style="text-align:left"><br/></div><div style="text-align:left"><br/></div></span><div style="text-align:left"><br/></div><div style="text-align:left"><br/></div><div style="text-align:left"><span style="background-color:initial">4. Return OK/NOK</span></div><div style="text-align:left"><br/></div></div></div></div></foreignObject><text x="205" y="51" fill="#333" font-family="Helvetica" font-size="14" text-anchor="middle">OSim Manager...</text></switch><path fill="none" d="M485 80h340v30H485z" pointer-events="all"/><switch transform="translate(-.5 -.5)"><foreignObject width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow:visible;text-align:left"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:338px;height:1px;padding-top:95px;margin-left:486px"><div data-drawio-colors="color: rgb(0, 0, 0);" style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:14px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;overflow-wrap:normal"><div style="text-align:left"><span style="background-color:initial">requestLatestSimulationResult(</span></div><div style="text-align:left"><span style="background-color:initial"><span style="white-space:pre"/>BPNS of &quot;A&quot;,<br/></span></div><div style="text-align:left"><span style="background-color:initial"><span style="white-space:pre"/>ID of the last Simulation Result from &quot;B&quot;,</span></div><div style="text-align:left"><span style="background-color:initial"><span style="white-space:pre"/>RequestID generated by &quot;A&quot; for this request-call)</span></div><div style="text-align:left"/><div style="text-align:left"><span style="background-color:initial"><br/></span></div><div style="text-align:left"/></div></div></div></foreignObject><text x="655" y="99" font-family="Helvetica" font-size="14" text-anchor="middle">requestLatestSimulationResult(...</text></switch><path fill="none" stroke="#000" stroke-miterlimit="10" d="M405 120h493.63" pointer-events="stroke"/><path stroke="#000" stroke-miterlimit="10" d="m903.88 120-7 3.5 1.75-3.5-1.75-3.5Z" pointer-events="all"/><rect width="530" height="710" x="925" y="30" fill="#f5f5f5" stroke="#666" pointer-events="all" rx="79.5" ry="79.5"/><switch transform="translate(-.5 -.5)"><foreignObject width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow:visible;text-align:left"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe flex-start;justify-content:unsafe center;width:523px;height:1px;padding-top:37px;margin-left:931px"><div data-drawio-colors="color: #333333;" style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:14px;font-family:Helvetica;color:#333;line-height:1.2;pointer-events:all;white-space:normal;overflow-wrap:normal"><b><font color="#5912ff">OSim Manager<br/>APP</font></b><br/><br/><div style="text-align:left"><i>Available Information receiving the request call :</i></div><div style="text-align:left"><span style="background-color:initial"><b>myBPNS</b>= &quot;B&quot;</span></div><div style="text-align:left"><span style="background-color:initial"><b>BPNS of my partner</b>= &quot;A&quot;</span></div><div style="text-align:left"><span style="background-color:initial"><b>myLastSimResultID</b>= &quot;789&quot;</span></div><div style="text-align:left"><span style="background-color:initial">RequestID = GUID generated by &quot;A&quot;</span></div><div style="text-align:left"><span style="background-color:initial"><br/></span></div><div style="text-align:left"><span style="background-color:initial">Steps to provide simResults to &quot;A&quot; :</span></div><div style="text-align:left"><span style="background-color:initial"><br/></span></div><div style="text-align:left">2.1. Check, if &quot;A&quot; is my partner in the OSim network configuration<span style="background-color:initial"><br/></span></div><div style="text-align:left"><span style="white-space:pre"/>IF FALSE<b>Return &quot;UnknownBPNS&quot;</b><br/></div><div style="text-align:left"><span style="background-color:initial"><br/></span></div><div style="text-align:left"><span style="background-color:initial">2.2. Execute Querry :</span></div><div style="text-align:left"><span style="background-color:initial"><span/>SELECT * FROM SimResult WHERE</span></div><div style="text-align:left"><span style="background-color:initial">Status = &quot;Released&quot;</span><br/></div><div style="text-align:left"><span style="background-color:initial"><br/></span></div><div style="text-align:left"><span style="background-color:initial">2.3. IF NoDataFound</span></div><div style="text-align:left"><b><span style="background-color:initial"><span/>Return &quot;NoSimulationResultsReleased&quot;</span><br/></b></div><div style="text-align:left"><span style="background-color:initial"><br/></span></div><div style="text-align:left"><span style="background-color:initial">2.4. Avoid sending the same SimResult twice</span></div><div style="text-align:left"><span style="background-color:initial">IF selected</span><span style="background-color:initial">SimResultID = inputSimResultID THEN</span></div><div style="text-align:left"><span style="background-color:initial"><b><span/>Return &quot;NoNewerSimulationAvailable&quot;<br/></b></span></div><div style="text-align:left"><span style="background-color:initial"><br/></span></div><div style="text-align:left"><span style="background-color:initial">2.5. Filter Shipments of the selcted SimResult to Requestors BPNS</span></div><span style="text-align:left">--&gt; Shipment.</span>DestinationBPNS = &quot;A&quot;<br/><br/><div style="text-align:left">2.6. IF NoDataFound</div><div style="text-align:left"><b><span/><span><span/></span>Return &quot;NoShipmentsPlanned&quot;</b><br/></div><div style="text-align:left"><span/>ELSE<br/></div><div style="text-align:left"><span/><span/>- Temporary persist the data Request. The Simulation Result will be sent<span/><span/>with a separate call<br/><span/><span/>-<b>Return OK</b></div><div style="text-align:left"><br/></div><div style="text-align:left">3 Call receiveLatestSimulationResult (</div><div style="text-align:left"><span style="white-space:pre"/>RequestID,</div><div style="text-align:left"><span style="white-space:pre"/>latest released simulation result)</div><div style="text-align:left"><br/></div></div></div></div></foreignObject><text x="1193" y="51" fill="#333" font-family="Helvetica" font-size="14" text-anchor="middle">OSim Manager...</text></switch><path fill="none" stroke="#000" stroke-miterlimit="10" d="m905 443-493.63-2.96" pointer-events="stroke"/><path stroke="#000" stroke-miterlimit="10" d="m406.12 440.01 7.02-3.46-1.77 3.49 1.73 3.51Z" pointer-events="all"/><ellipse cx="450" cy="87.5" fill="#ffe6cc" stroke="#d79b00" pointer-events="all" rx="25" ry="22.5"/><switch transform="translate(-.5 -.5)"><foreignObject width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow:visible;text-align:left"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:48px;height:1px;padding-top:88px;margin-left:426px"><div data-drawio-colors="color: rgb(0, 0, 0);" style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;overflow-wrap:normal">1</div></div></div></foreignObject><text x="450" y="91" font-family="Helvetica" font-size="12" text-anchor="middle">1</text></switch><ellipse cx="605" cy="475.5" fill="#ffe6cc" stroke="#d79b00" pointer-events="all" rx="25" ry="22.5"/><switch transform="translate(-.5 -.5)"><foreignObject width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow:visible;text-align:left"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:48px;height:1px;padding-top:476px;margin-left:581px"><div data-drawio-colors="color: rgb(0, 0, 0);" style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;overflow-wrap:normal">2</div></div></div></foreignObject><text x="605" y="479" font-family="Helvetica" font-size="12" text-anchor="middle">2</text></switch><path fill="none" d="M640 521.5h255v30H640z" pointer-events="all"/><switch transform="translate(-.5 -.5)"><foreignObject width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow:visible;text-align:left"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe flex-start;width:253px;height:1px;padding-top:537px;margin-left:642px"><div data-drawio-colors="color: rgb(0, 0, 0);" style="box-sizing:border-box;font-size:0;text-align:left"><div style="display:inline-block;font-size:14px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;overflow-wrap:normal"><div>Return Value:<br/>{</div><span style="white-space:pre"/>UnknownBPNS,<br/><span style="white-space:pre"/>NoSimulationResultsReleased,<br/><span/><span style="white-space:pre"/>NoNewerSimulationAvailable,<br/><span/><span style="white-space:pre"/>NoShipmentsPlanned,<br/><span style="white-space:pre"/>OK<br/><span style="background-color:initial">}</span></div></div></div></foreignObject><text x="642" y="541" font-family="Helvetica" font-size="14">Return Value:...</text></switch><path fill="none" stroke="#000" stroke-miterlimit="10" d="m905 613-493.63-2.96" pointer-events="stroke"/><path stroke="#000" stroke-miterlimit="10" d="m406.12 610.01 7.02-3.46-1.77 3.49 1.73 3.51Z" pointer-events="all"/><ellipse cx="451" cy="645.5" fill="#ffe6cc" stroke="#d79b00" pointer-events="all" rx="25" ry="22.5"/><switch transform="translate(-.5 -.5)"><foreignObject width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow:visible;text-align:left"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:48px;height:1px;padding-top:646px;margin-left:427px"><div data-drawio-colors="color: rgb(0, 0, 0);" style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;overflow-wrap:normal">3</div></div></div></foreignObject><text x="451" y="649" font-family="Helvetica" font-size="12" text-anchor="middle">3</text></switch><path fill="none" d="M496 638h312v30H496z" pointer-events="all"/><switch transform="translate(-.5 -.5)"><foreignObject width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow:visible;text-align:left"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:310px;height:1px;padding-top:653px;margin-left:497px"><div data-drawio-colors="color: rgb(0, 0, 0);" style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:14px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;overflow-wrap:normal"><div style="text-align:left"><span style="background-color:initial">receiveLatestSimulationResult(</span></div><div style="text-align:left"><span style="background-color:initial"><span style="white-space:pre"/>RequestID,</span></div><div style="text-align:left"><span style="background-color:initial"><span style="white-space:pre"/>MaterialflowSimulationResult</span><span style="background-color:initial">)</span></div><div style="text-align:left"/><div style="text-align:left"><span style="background-color:initial"><br/></span></div><div style="text-align:left"/></div></div></div></foreignObject><text x="652" y="657" font-family="Helvetica" font-size="14" text-anchor="middle">receiveLatestSimulationResult(...</text></switch><path fill="none" stroke="#000" stroke-miterlimit="10" d="m405 700 493.63 2.96" pointer-events="stroke"/><path stroke="#000" stroke-miterlimit="10" d="m903.88 702.99-7.02 3.46 1.77-3.49-1.73-3.51Z" pointer-events="all"/><path fill="none" d="M648 745h370v30H648z" pointer-events="all"/><switch transform="translate(-.5 -.5)"><foreignObject width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow:visible;text-align:left"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe flex-start;width:368px;height:1px;padding-top:760px;margin-left:650px"><div data-drawio-colors="color: rgb(0, 0, 0);" style="box-sizing:border-box;font-size:0;text-align:left"><div style="display:inline-block;font-size:14px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;overflow-wrap:normal"><div>Return Value:<br/>{</div><span style="white-space:pre"/>OK,<br/><span style="white-space:pre"/>NOK<br/><span style="background-color:initial">}</span></div></div></div></foreignObject><text x="650" y="764" font-family="Helvetica" font-size="14">Return Value:...</text></switch><ellipse cx="604" cy="732.5" fill="#ffe6cc" stroke="#d79b00" pointer-events="all" rx="25" ry="22.5"/><switch transform="translate(-.5 -.5)"><foreignObject width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow:visible;text-align:left"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:48px;height:1px;padding-top:733px;margin-left:580px"><div data-drawio-colors="color: rgb(0, 0, 0);" style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:12px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;overflow-wrap:normal">4</div></div></div></foreignObject><text x="604" y="736" font-family="Helvetica" font-size="12" text-anchor="middle">4</text></switch><path fill="none" d="M22.5 0h312v30h-312z" pointer-events="all"/><switch transform="translate(-.5 -.5)"><foreignObject width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow:visible;text-align:left"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:310px;height:1px;padding-top:15px;margin-left:24px"><div data-drawio-colors="color: rgb(0, 0, 0);" style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:14px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;overflow-wrap:normal"><div style="text-align:left"><i><b><u>Data consumer</u></b></i></div><div style="text-align:left"/></div></div></div></foreignObject><text x="179" y="19" font-family="Helvetica" font-size="14" text-anchor="middle">Data consumer
</text></switch><path fill="none" d="M1033 0h312v30h-312z" pointer-events="all"/><switch transform="translate(-.5 -.5)"><foreignObject width="100%" height="100%" pointer-events="none" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow:visible;text-align:left"><div xmlns="http://www.w3.org/1999/xhtml" style="display:flex;align-items:unsafe center;justify-content:unsafe center;width:310px;height:1px;padding-top:15px;margin-left:1034px"><div data-drawio-colors="color: rgb(0, 0, 0);" style="box-sizing:border-box;font-size:0;text-align:center"><div style="display:inline-block;font-size:14px;font-family:Helvetica;color:#000;line-height:1.2;pointer-events:all;white-space:normal;overflow-wrap:normal"><div style="text-align:left"><i><b><u>Data provider</u></b></i></div><div style="text-align:left"/></div></div></div></foreignObject><text x="1189" y="19" font-family="Helvetica" font-size="14" text-anchor="middle">Data provider
</text></switch><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a xlink:href="https://www.drawio.com/doc/faq/svg-export-text-problems" target="_blank" transform="translate(0 -5)"><text x="50%" y="100%" font-size="10" text-anchor="middle">Text is not SVG - cannot display</text></a></switch></svg>